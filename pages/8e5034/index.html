<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>给博客添加照片 | Sim-U 我的世界 模拟城市模组 官网</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <script async="true" data-ad-client="client=ca-pub-9156454987799969" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" crossorigin="anonymous">[object Object]</script>
    <meta name="description" content="MC,我的世界,模拟城市,模拟大都市模组">
    <meta name="keywords" content="MC,我的世界,模拟城市,模拟大都市模组,Sim-U">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.f1160bd0.css" as="style"><link rel="preload" href="/assets/js/app.08877f3b.js" as="script"><link rel="preload" href="/assets/js/2.2c97afdf.js" as="script"><link rel="preload" href="/assets/js/27.57111764.js" as="script"><link rel="prefetch" href="/assets/js/10.a32d3616.js"><link rel="prefetch" href="/assets/js/11.4500e26d.js"><link rel="prefetch" href="/assets/js/12.76d2465f.js"><link rel="prefetch" href="/assets/js/13.d3aec185.js"><link rel="prefetch" href="/assets/js/14.79caaf23.js"><link rel="prefetch" href="/assets/js/15.a4fae28c.js"><link rel="prefetch" href="/assets/js/16.2f1a3f6d.js"><link rel="prefetch" href="/assets/js/17.9565271d.js"><link rel="prefetch" href="/assets/js/18.8f9bb2c1.js"><link rel="prefetch" href="/assets/js/19.75363a4b.js"><link rel="prefetch" href="/assets/js/20.f26c2d3f.js"><link rel="prefetch" href="/assets/js/21.f27b6be7.js"><link rel="prefetch" href="/assets/js/22.11848852.js"><link rel="prefetch" href="/assets/js/23.8bd73b48.js"><link rel="prefetch" href="/assets/js/24.97f164cb.js"><link rel="prefetch" href="/assets/js/25.1b7e61aa.js"><link rel="prefetch" href="/assets/js/26.d7355c48.js"><link rel="prefetch" href="/assets/js/28.381b3357.js"><link rel="prefetch" href="/assets/js/29.e50da43f.js"><link rel="prefetch" href="/assets/js/3.6d699b80.js"><link rel="prefetch" href="/assets/js/30.dfaca801.js"><link rel="prefetch" href="/assets/js/31.92f3b30d.js"><link rel="prefetch" href="/assets/js/32.bd657ba6.js"><link rel="prefetch" href="/assets/js/33.cd809eaf.js"><link rel="prefetch" href="/assets/js/34.72e2f1c6.js"><link rel="prefetch" href="/assets/js/4.8337ceb0.js"><link rel="prefetch" href="/assets/js/5.7832e439.js"><link rel="prefetch" href="/assets/js/6.d2c83fda.js"><link rel="prefetch" href="/assets/js/7.dc662978.js"><link rel="prefetch" href="/assets/js/8.8d8940bc.js"><link rel="prefetch" href="/assets/js/9.4ad4330e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1160bd0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Sim-U 我的世界 模拟城市模组 官网" class="logo"> <span class="site-name can-hide">Sim-U 我的世界 模拟城市模组 官网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/posts/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><a href="/course/" class="link-title">教程</a> <span class="title" style="display:none;">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bilibili.com/video/BV1jY411j7xZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/course/1/" class="nav-link">使用教程</a></li><li class="dropdown-subitem"><a href="/course/2/" class="nav-link">常见问题</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/download/1/" class="nav-link">下载中心</a></div><div class="nav-item"><a href="/pages/1b12ed/" class="nav-link">赞助</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我们" class="dropdown-title"><a href="/contact_us/1/" class="link-title">联系我们</a> <span class="title" style="display:none;">联系我们</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;appChannel=share&amp;inviteCode=1W9y5py&amp;businessType=9&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方频道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/posts/" class="nav-link">随笔</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="教程" class="dropdown-title"><a href="/course/" class="link-title">教程</a> <span class="title" style="display:none;">教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.bilibili.com/video/BV1jY411j7xZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频教程
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/course/1/" class="nav-link">使用教程</a></li><li class="dropdown-subitem"><a href="/course/2/" class="nav-link">常见问题</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/download/1/" class="nav-link">下载中心</a></div><div class="nav-item"><a href="/pages/1b12ed/" class="nav-link">赞助</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="联系我们" class="dropdown-title"><a href="/contact_us/1/" class="link-title">联系我们</a> <span class="title" style="display:none;">联系我们</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;appChannel=share&amp;inviteCode=1W9y5py&amp;businessType=9&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方频道
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav> <div class="sidebar-slot sidebar-slot-top"><a href="#" target="_blank"><img src="/img/qrcode/gzh.png" alt="npm" class="no-zoom" style="width: 100%;border-radius: 2px;"></a></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>给博客添加照片</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8e5034/#准备" class="sidebar-link">准备</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/8e5034/#安装python" class="sidebar-link">安装python</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/8e5034/#博客相册页面" class="sidebar-link">博客相册页面</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/8e5034/#其他配置" class="sidebar-link">其他配置</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/posts/#随笔" data-v-06225672>随笔</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/trhsy" target="_blank" title="作者" class="beLink" data-v-06225672>trhsy</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2018年10月31日17:34:48</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">给博客添加照片<!----></h1> <div class="page-slot page-slot-top">
    <div class="wwads-cn wwads-horizontal page-wwads" data-id="136"></div>
    <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><h1 id="给博客添加照片"><a href="#给博客添加照片" class="header-anchor">#</a> 给博客添加照片</h1> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <p>在github创建一个新库名字叫Blog_Album，（名字随便起）本地新建文件名字同样叫Blog_Album，打开Git切换到当前文件夹下执行命令<code>git init</code>创建本地库，然后再次执行<code>git remote add origin 你Github仓库ssh地址</code></p> <h2 id="安装python"><a href="#安装python" class="header-anchor">#</a> 安装python</h2> <p><a href="https://www.python.org/downloads/windows/" target="_blank" rel="noopener noreferrer">下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
下载安装后打开cmd,切换都python安装目录下<code>Scripts\</code>我的地址<code>D:\work\Python\Python37\Scripts</code> 之后执行</p> <div class="language- extra-class"><pre class="language-text"><code>easy_install-3.7.exe pip
pip install pillow 
</code></pre></div><p>本地新建的Blog_Album文件下新建一个文件夹/photos，和min_photos文件夹，并且再Blog_Album下新建tool.py文件
代码如下:</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment">#coding: utf-8</span>
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">import</span> os
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> json
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime
<span class="token keyword">from</span> Imageprocessing <span class="token keyword">import</span> Graphics

<span class="token comment"># 定义压缩比，数值越大，压缩越小</span>
SIZE_normal <span class="token operator">=</span> <span class="token number">1.0</span>
SIZE_small <span class="token operator">=</span> <span class="token number">1.5</span>
SIZE_more_small <span class="token operator">=</span> <span class="token number">2.0</span>
SIZE_more_small_small <span class="token operator">=</span> <span class="token number">3.0</span>


<span class="token keyword">def</span> <span class="token function">make_directory</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;创建目录&quot;&quot;&quot;</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>directory<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">directory_exists</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;判断目录是否存在&quot;&quot;&quot;</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

<span class="token keyword">def</span> <span class="token function">list_img_file</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;列出目录下所有文件，并筛选出图片文件列表返回&quot;&quot;&quot;</span>
    old_list <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>directory<span class="token punctuation">)</span>
    <span class="token comment"># print old_list</span>
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> filename <span class="token keyword">in</span> old_list<span class="token punctuation">:</span>
        name<span class="token punctuation">,</span> fileformat <span class="token operator">=</span> filename<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> fileformat<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;jpg&quot;</span> <span class="token keyword">or</span> fileformat<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;png&quot;</span> <span class="token keyword">or</span> fileformat<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;gif&quot;</span><span class="token punctuation">:</span>
            new_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
    <span class="token comment"># print new_list</span>
    <span class="token keyword">return</span> new_list


<span class="token keyword">def</span> <span class="token function">print_help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token triple-quoted-string string">&quot;&quot;&quot;
    This program helps compress many image files
    you can choose which scale you want to compress your img(jpg/png/etc)
    1) normal compress(4M to 1M around)
    2) small compress(4M to 500K around)
    3) smaller compress(4M to 300K around)
    &quot;&quot;&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">compress</span><span class="token punctuation">(</span>choose<span class="token punctuation">,</span> des_dir<span class="token punctuation">,</span> src_dir<span class="token punctuation">,</span> file_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;压缩算法，img.thumbnail对图片进行压缩，
    
    参数
    -----------
    choose: str
            选择压缩的比例，有4个选项，越大压缩后的图片越小
    &quot;&quot;&quot;</span>
    <span class="token keyword">if</span> choose <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>
        scale <span class="token operator">=</span> SIZE_normal
    <span class="token keyword">if</span> choose <span class="token operator">==</span> <span class="token string">'2'</span><span class="token punctuation">:</span>
        scale <span class="token operator">=</span> SIZE_small
    <span class="token keyword">if</span> choose <span class="token operator">==</span> <span class="token string">'3'</span><span class="token punctuation">:</span>
        scale <span class="token operator">=</span> SIZE_more_small
    <span class="token keyword">if</span> choose <span class="token operator">==</span> <span class="token string">'4'</span><span class="token punctuation">:</span>
        scale <span class="token operator">=</span> SIZE_more_small_small
    <span class="token keyword">for</span> infile <span class="token keyword">in</span> file_list<span class="token punctuation">:</span>
        img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>src_dir<span class="token operator">+</span>infile<span class="token punctuation">)</span>
        <span class="token comment"># size_of_file = os.path.getsize(infile)</span>
        w<span class="token punctuation">,</span> h <span class="token operator">=</span> img<span class="token punctuation">.</span>size
        img<span class="token punctuation">.</span>thumbnail<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>w<span class="token operator">/</span>scale<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>h<span class="token operator">/</span>scale<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>des_dir <span class="token operator">+</span> infile<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">compress_photo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''调用压缩图片的函数
    '''</span>
    src_dir<span class="token punctuation">,</span> des_dir <span class="token operator">=</span> <span class="token string">&quot;photos/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;min_photos/&quot;</span>
    
    <span class="token keyword">if</span> directory_exists<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> directory_exists<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
            make_directory<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span>
        <span class="token comment"># business logic</span>
        file_list_src <span class="token operator">=</span> list_img_file<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span>
    <span class="token keyword">if</span> directory_exists<span class="token punctuation">(</span>des_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> directory_exists<span class="token punctuation">(</span>des_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
            make_directory<span class="token punctuation">(</span>des_dir<span class="token punctuation">)</span>
        file_list_des <span class="token operator">=</span> list_img_file<span class="token punctuation">(</span>des_dir<span class="token punctuation">)</span>
        <span class="token comment"># print file_list</span>
    <span class="token triple-quoted-string string">'''如果已经压缩了，就不再压缩'''</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>file_list_des<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> file_list_des<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">in</span> file_list_src<span class="token punctuation">:</span>
            file_list_src<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>file_list_des<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    compress<span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> des_dir<span class="token punctuation">,</span> src_dir<span class="token punctuation">,</span> file_list_src<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">handle_photo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''根据图片的文件名处理成需要的json格式的数据
    
    -----------
    最后将data.json文件存到博客的source/photos文件夹下
    '''</span>
    src_dir<span class="token punctuation">,</span> des_dir <span class="token operator">=</span> <span class="token string">&quot;photos/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;min_photos/&quot;</span>
    file_list <span class="token operator">=</span> list_img_file<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span>
    list_info <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>file_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        filename <span class="token operator">=</span> file_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        date_str<span class="token punctuation">,</span> <span class="token operator">*</span>info <span class="token operator">=</span> filename<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;_&quot;</span><span class="token punctuation">)</span>
        info<span class="token operator">=</span><span class="token string">'_'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>info<span class="token punctuation">)</span>
        info<span class="token punctuation">,</span> _ <span class="token operator">=</span> info<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
        date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>date_str<span class="token punctuation">,</span> <span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token punctuation">)</span>
        year_month <span class="token operator">=</span> date_str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">]</span>            
        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token comment"># 处理第一个文件</span>
            new_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">:</span> year_month<span class="token punctuation">,</span> <span class="token string">&quot;arr&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'year'</span><span class="token punctuation">:</span> date<span class="token punctuation">.</span>year<span class="token punctuation">,</span>
                                                                   <span class="token string">'month'</span><span class="token punctuation">:</span> date<span class="token punctuation">.</span>month<span class="token punctuation">,</span>
                                                                   <span class="token string">'link'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                                   <span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>info<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                                   <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span>
                                                                   <span class="token punctuation">}</span>
                                        <span class="token punctuation">}</span> 
            list_info<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_dict<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> year_month <span class="token operator">!=</span> list_info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 不是最后的一个日期，就新建一个dict</span>
            new_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">:</span> year_month<span class="token punctuation">,</span> <span class="token string">&quot;arr&quot;</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token string">'year'</span><span class="token punctuation">:</span> date<span class="token punctuation">.</span>year<span class="token punctuation">,</span>
                                                   <span class="token string">'month'</span><span class="token punctuation">:</span> date<span class="token punctuation">.</span>month<span class="token punctuation">,</span>
                                                   <span class="token string">'link'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                   <span class="token string">'text'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>info<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                   <span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span>
                                                   <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
            list_info<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_dict<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 同一个日期</span>
            list_info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'arr'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
            list_info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'arr'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>info<span class="token punctuation">)</span>
            list_info<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'arr'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">)</span>
    list_info<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 翻转</span>
    final_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">:</span> list_info<span class="token punctuation">}</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;F:/项目/个人微博/love/themes/next/source/lib/album/data.json&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>final_dict<span class="token punctuation">,</span> fp<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">cut_photo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;裁剪算法
    
    ----------
    调用Graphics类中的裁剪算法，将src_dir目录下的文件进行裁剪（裁剪成正方形）
    &quot;&quot;&quot;</span>
    src_dir <span class="token operator">=</span> <span class="token string">&quot;photos/&quot;</span>
    <span class="token keyword">if</span> directory_exists<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> directory_exists<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
            make_directory<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span>
        <span class="token comment"># business logic</span>
        file_list <span class="token operator">=</span> list_img_file<span class="token punctuation">(</span>src_dir<span class="token punctuation">)</span>
        <span class="token comment"># print file_list</span>
        <span class="token keyword">if</span> file_list<span class="token punctuation">:</span>
            print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> infile <span class="token keyword">in</span> file_list<span class="token punctuation">:</span>
                img <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>src_dir<span class="token operator">+</span>infile<span class="token punctuation">)</span>
                Graphics<span class="token punctuation">(</span>infile<span class="token operator">=</span>src_dir<span class="token operator">+</span>infile<span class="token punctuation">,</span> outfile<span class="token operator">=</span>src_dir <span class="token operator">+</span> infile<span class="token punctuation">)</span><span class="token punctuation">.</span>cut_by_ratio<span class="token punctuation">(</span><span class="token punctuation">)</span>            
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;source directory not exist!&quot;</span><span class="token punctuation">)</span>     



<span class="token keyword">def</span> <span class="token function">git_operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'git add --all'</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'git commit -m &quot;add photos&quot;'</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'git push origin master'</span><span class="token punctuation">)</span>

<span class="token comment"># if __name__ == &quot;__main__&quot;:</span>
<span class="token comment">#     cut_photo()        # 裁剪图片，裁剪成正方形，去中间部分</span>
<span class="token comment">#     compress_photo()   # 压缩图片，并保存到mini_photos文件夹下</span>
<span class="token comment">#     git_operation()    # 提交到github仓库</span>
<span class="token comment">#     handle_photo()     # 将文件处理成json格式，存到博客仓库中</span>
cut_photo<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># 裁剪图片，裁剪成正方形，去中间部分</span>
compress_photo<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># 压缩图片，并保存到mini_photos文件夹下</span>
git_operation<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 提交到github仓库</span>
handle_photo<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment"># 将文件处理成json格式，存到博客仓库中   </span>
</code></pre></div><p>另外新建一个文件Imageprocessing.py，存放到python安装位置<code>Python\Python35-32\Lib\site-packages</code>下
代码如下：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token comment"># coding=utf-8  </span>
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image  
<span class="token keyword">import</span> shutil  
<span class="token keyword">import</span> os  

<span class="token keyword">class</span> <span class="token class-name">Graphics</span><span class="token punctuation">:</span>  
    <span class="token triple-quoted-string string">'''图片处理类
    
    参数
    -------
    infile: 输入文件路径
    outfile: 输出文件路径
    '''</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> infile<span class="token punctuation">,</span> outfile<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>infile <span class="token operator">=</span> infile
        self<span class="token punctuation">.</span>outfile <span class="token operator">=</span> outfile

    <span class="token keyword">def</span> <span class="token function">fixed_size</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token triple-quoted-string string">&quot;&quot;&quot;按照固定尺寸处理图片&quot;&quot;&quot;</span>  
        im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        out <span class="token operator">=</span> im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">,</span>Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>  
        out<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  


    <span class="token keyword">def</span> <span class="token function">resize_by_width</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> w_divide_h<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token triple-quoted-string string">&quot;&quot;&quot;按照宽度进行所需比例缩放&quot;&quot;&quot;</span>  
        im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> im<span class="token punctuation">.</span>size   
        x_s <span class="token operator">=</span> x  
        y_s <span class="token operator">=</span> x<span class="token operator">/</span>w_divide_h  
        out <span class="token operator">=</span> im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>x_s<span class="token punctuation">,</span> y_s<span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>   
        out<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  


    <span class="token keyword">def</span> <span class="token function">resize_by_height</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> w_divide_h<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token triple-quoted-string string">&quot;&quot;&quot;按照高度进行所需比例缩放&quot;&quot;&quot;</span>  
        im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> im<span class="token punctuation">.</span>size   
        x_s <span class="token operator">=</span> y<span class="token operator">*</span>w_divide_h  
        y_s <span class="token operator">=</span> y  
        out <span class="token operator">=</span> im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>x_s<span class="token punctuation">,</span> y_s<span class="token punctuation">)</span><span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>   
        out<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  


    <span class="token keyword">def</span> <span class="token function">resize_by_size</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token triple-quoted-string string">&quot;&quot;&quot;按照生成图片文件大小进行处理(单位KB)&quot;&quot;&quot;</span>  
        size <span class="token operator">*=</span> <span class="token number">1024</span>  
        im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        size_tmp <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        q <span class="token operator">=</span> <span class="token number">100</span>  
        <span class="token keyword">while</span> size_tmp <span class="token operator">&gt;</span> size <span class="token keyword">and</span> q <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>  
            <span class="token keyword">print</span> <span class="token punctuation">(</span>q<span class="token punctuation">)</span>  
            out <span class="token operator">=</span> im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>im<span class="token punctuation">.</span>size<span class="token punctuation">,</span> Image<span class="token punctuation">.</span>ANTIALIAS<span class="token punctuation">)</span>  
            out<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">,</span> quality<span class="token operator">=</span>q<span class="token punctuation">)</span>  
            size_tmp <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>getsize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  
            q <span class="token operator">-=</span> <span class="token number">5</span>  
        <span class="token keyword">if</span> q <span class="token operator">==</span> <span class="token number">100</span><span class="token punctuation">:</span>  
            shutil<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">,</span> self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  

  
    <span class="token keyword">def</span> <span class="token function">cut_by_ratio</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>  
        <span class="token triple-quoted-string string">&quot;&quot;&quot;按照图片长宽进行分割
        
        ------------
        取中间的部分，裁剪成正方形
        &quot;&quot;&quot;</span>  
        im <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>infile<span class="token punctuation">)</span>  
        <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> im<span class="token punctuation">.</span>size  
        <span class="token keyword">if</span> x <span class="token operator">&gt;</span> y<span class="token punctuation">:</span>  
            region <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span>y<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>x<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>y<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>  
            <span class="token comment">#裁切图片  </span>
            crop_img <span class="token operator">=</span> im<span class="token punctuation">.</span>crop<span class="token punctuation">(</span>region<span class="token punctuation">)</span>  
            <span class="token comment">#保存裁切后的图片  </span>
            crop_img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>             
        <span class="token keyword">elif</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">:</span>  
            region <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>y<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span>x<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>y<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>x<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">#裁切图片  </span>
            crop_img <span class="token operator">=</span> im<span class="token punctuation">.</span>crop<span class="token punctuation">(</span>region<span class="token punctuation">)</span>  
            <span class="token comment">#保存裁切后的图片  </span>
            crop_img<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>outfile<span class="token punctuation">)</span>  
</code></pre></div><p>此外图片名字命名方式以<code>YYYY-MM-DD_描述.jpg</code>，时间年月日描述；
上面一切的操作为的是图片处理
完了在cmd中切换到你Blog_Album文件下执行命令<code>python tool.py F:\项目\个人微博\Blog_Album\photos</code> 就是你刚刚创建的文件下
执行前请修改data.json存放位置，大约在133行</p> <div class="language- extra-class"><pre class="language-text"><code>with open(&quot;F:/项目/个人微博/love/themes/next/source/lib/album/data.json&quot;,&quot;w&quot;) as fp:
修改为
with open(&quot;你的博客项目地址/themes/next/source/lib/album/data.json&quot;,&quot;w&quot;) as fp:
</code></pre></div><h2 id="博客相册页面"><a href="#博客相册页面" class="header-anchor">#</a> 博客相册页面</h2> <p>在博客项目跟目录下执行<code>hexo n page photos</code>,并再主题配置_config.yml文件中menu选项中添加photos</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">menu</span><span class="token punctuation">:</span>
  <span class="token key atrule">home</span><span class="token punctuation">:</span> / <span class="token punctuation">|</span><span class="token punctuation">|</span> home
  <span class="token comment">#about: /about/ || user</span>
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> /tags/ <span class="token punctuation">|</span><span class="token punctuation">|</span> tags
  <span class="token key atrule">categories</span><span class="token punctuation">:</span> /categories/ <span class="token punctuation">|</span><span class="token punctuation">|</span> th
  <span class="token key atrule">archives</span><span class="token punctuation">:</span> /archives/ <span class="token punctuation">|</span><span class="token punctuation">|</span> archive
  <span class="token key atrule">photos</span><span class="token punctuation">:</span> /photos  <span class="token punctuation">|</span><span class="token punctuation">|</span> camera
  <span class="token comment">#top: /top/ || signal</span>
  <span class="token comment">#schedule: /schedule/ || calendar</span>
  <span class="token comment">#sitemap: /sitemap.xml || sitemap</span>
  <span class="token comment">#commonweal: /404/ || heartbeat</span>
</code></pre></div><p>在photos中的index.md添加代码</p> <div class="language-md extra-class"><pre class="language-md"><code><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token front-matter yaml language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> 照片
<span class="token key atrule">date</span><span class="token punctuation">:</span> 2018年10月31日17<span class="token punctuation">:</span><span class="token datetime number">34:48</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span> photos
<span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">&quot;photos&quot;</span>
<span class="token key atrule">categories</span><span class="token punctuation">:</span> photos
<span class="token key atrule">copyright</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">fancybox</span><span class="token punctuation">:</span> <span class="token boolean important">false</span></span>
<span class="token punctuation">---</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../lib/album/ins.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../lib/album/photoswipe.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../lib/album/default-skin/default-skin.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>photos-btn-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>photos-btn active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:void(0)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>external<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Photos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>instagram itemscope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://yourbolg.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>open-ins<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>图片正在加载中…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token function-variable function">loadScript</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> $script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
      document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>$script<span class="token punctuation">)</span>
      $script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">loadScript</span><span class="token punctuation">(</span><span class="token string">'../lib/album/ins.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上述的css&amp;js文件从<a href="https://github.com/malizhigithub/HexoAlbumData/tree/master/" target="_blank" rel="noopener noreferrer">这里下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
把相应为文件拷贝到相应的位置，photoswipe-ui-default.min.js, photoswipe.min.js俩文件放到themes/next/source/js/src中。
对于ins.js修改，大概在121行左右就是你自己的github中的链接</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> minSrc <span class="token operator">=</span> <span class="token string">'https://github.com/123love123/my_album/tree/master/min_photos'</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>link<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			
<span class="token keyword">var</span> src <span class="token operator">=</span> <span class="token string">'https://github.com/123love123/my_album/tree/master/photos/'</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>link<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>修改成你的地址就行</p> <h2 id="其他配置"><a href="#其他配置" class="header-anchor">#</a> 其他配置</h2> <p>next/layout/_layout.swig的头部head前添加对js文件下修改</p> <div class="language-swig extra-class"><pre class="language-text"><code>&lt;script src=&quot;{{ url_for(theme.js) }}/src/photoswipe.min.js?v={{ theme.version }}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;{{ url_for(theme.js) }}/src/photoswipe-ui-default.min.js?v={{ theme.version }}&quot;&gt;&lt;/script&gt;
</code></pre></div><p>body中</p> <div class="language-swig extra-class"><pre class="language-text"><code>
{% if page.type === &quot;photos&quot; %}
  &lt;!-- Root element of PhotoSwipe. Must have class pswp. --&gt;
  &lt;div class=&quot;pswp&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;pswp__bg&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;pswp__scroll-wrap&quot;&gt;
        &lt;div class=&quot;pswp__container&quot;&gt;
            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;
            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;pswp__ui pswp__ui--hidden&quot;&gt;
            &lt;div class=&quot;pswp__top-bar&quot;&gt;
                &lt;div class=&quot;pswp__counter&quot;&gt;&lt;/div&gt;
                &lt;button class=&quot;pswp__button pswp__button--close&quot; title=&quot;Close (Esc)&quot;&gt;&lt;/button&gt;
                &lt;button class=&quot;pswp__button pswp__button--share&quot; title=&quot;Share&quot;&gt;&lt;/button&gt;
                &lt;button class=&quot;pswp__button pswp__button--fs&quot; title=&quot;Toggle fullscreen&quot;&gt;&lt;/button&gt;
                &lt;button class=&quot;pswp__button pswp__button--zoom&quot; title=&quot;Zoom in/out&quot;&gt;&lt;/button&gt;
                &lt;!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR --&gt;
                &lt;!-- element will get class pswp__preloader--active when preloader is running --&gt;
                &lt;div class=&quot;pswp__preloader&quot;&gt;
                    &lt;div class=&quot;pswp__preloader__icn&quot;&gt;
                      &lt;div class=&quot;pswp__preloader__cut&quot;&gt;
                        &lt;div class=&quot;pswp__preloader__donut&quot;&gt;&lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;pswp__share-modal pswp__share-modal--hidden pswp__single-tap&quot;&gt;
                &lt;div class=&quot;pswp__share-tooltip&quot;&gt;&lt;/div&gt; 
            &lt;/div&gt;
            &lt;button class=&quot;pswp__button pswp__button--arrow--left&quot; title=&quot;Previous (arrow left)&quot;&gt;
            &lt;/button&gt;
            &lt;button class=&quot;pswp__button pswp__button--arrow--right&quot; title=&quot;Next (arrow right)&quot;&gt;
            &lt;/button&gt;
            &lt;div class=&quot;pswp__caption&quot;&gt;
                &lt;div class=&quot;pswp__caption__center&quot;&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
{% endif %}
</code></pre></div><p>在/themes/next/layout/_scripts/pages/post-details.swig中</p> <div class="language-swig extra-class"><pre class="language-text"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;{{ url_for(theme.js) }}/src/photoswipe.min.js?v={{ theme.version }}&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;{{ url_for(theme.js) }}/src/photoswipe-ui-default.min.js?v={{ theme.version }}&quot;&gt;&lt;/script&gt;

</code></pre></div><p>主题配置文件中fancybox设置true,修改/themes/next/layout/_partials/head.swig
在</p> <div class="language-swig extra-class"><pre class="language-text"><code>{% if theme.fancybox %}
  {% set fancybox_css_uri = url_for(theme.vendors._internal + '/fancybox/source/jquery.fancybox.css?v=2.1.5') %}
  {% if theme.vendors.fancybox_css %}
    {% set fancybox_css_uri = theme.vendors.fancybox_css %}
  {% endif %}
  &lt;link href=&quot;{{ fancybox_css_uri }}&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
{% endif %}
</code></pre></div><p>上方加入</p> <div class="language-swig extra-class"><pre class="language-text"><code>{% if page.type === &quot;photos&quot;  %}
  {% set theme.fancybox = false %}
{% endif %}
{% if page.type !== &quot;photos&quot;  %}
  {% set theme.fancybox = true %}
{% endif %}
</code></pre></div><p>如果本文对您有所帮助，请打赏给我吧，我先送个你也红包往下看，你可以把扫到红包打赏个我哦！
<img src="https://cdn.jsdelivr.net/gh/trhsy/PicGo/img/hb.jpg" alt="红包"></p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/12/05, 09:12:57</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:trhsy_fan@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/trhsy" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://cdn.jsdelivr.net/gh/trhsy/PicGo/img/关注微信公众号获取更多资讯.jpg" title="公众号" target="_blank" class="iconfont icon-weixin"></a><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;appChannel=share&amp;inviteCode=1W9y5py&amp;businessType=9&amp;from=246610&amp;biz=ka" title="QQ群" target="_blank" class="iconfont icon-QQ"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Sim-U | By Trhsy</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08877f3b.js" defer></script><script src="/assets/js/2.2c97afdf.js" defer></script><script src="/assets/js/27.57111764.js" defer></script>
  </body>
</html>
